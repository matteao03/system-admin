{"remainingRequest":"/Users/tangjun/www/strayjoke-admin/node_modules/babel-loader/lib/index.js!/Users/tangjun/www/strayjoke-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/tangjun/www/strayjoke-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tangjun/www/strayjoke-admin/src/components/users/UsersIndex.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tangjun/www/strayjoke-admin/src/components/users/UsersIndex.vue","mtime":1545220118000},{"path":"/Users/tangjun/www/strayjoke-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tangjun/www/strayjoke-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/tangjun/www/strayjoke-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tangjun/www/strayjoke-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getUserListPage, removeUser, batchRemoveUser, editUser, addUser } from '@/api/user';\nexport default {\n  data: function data() {\n    return {\n      filters: {\n        name: ''\n      },\n      users: [],\n      page: 1,\n      total: 0,\n      listLoading: false,\n      sels: [],\n      //列表选中列\n      //新增界面数据\n      addFormVisible: false,\n      //新增界面是否显示\n      addFormRules: {\n        name: [{\n          required: true,\n          message: '请输入姓名',\n          trigger: 'blur'\n        }]\n      },\n      addForm: {\n        name: '',\n        sex: -1,\n        id: 0,\n        birth: '',\n        mobile: ''\n      },\n      editFormVisible: false,\n      //编辑界面是否显示\n      editLoading: false,\n      editFormRules: {\n        name: [{\n          required: true,\n          message: '请输入姓名',\n          trigger: 'blur'\n        }]\n      },\n      //编辑界面数据\n      editForm: {\n        name: '',\n        sex: -1,\n        id: 0,\n        birth: '',\n        mobile: ''\n      }\n    };\n  },\n  methods: {\n    formatSex: function formatSex(row, column) {\n      return row.sex == 1 ? '男' : row.sex == 2 ? '女' : '未知';\n    },\n    //手机号隐藏\n    formatMobile: function formatMobile(row, column) {\n      return row.mobile.substr(0, 3) + '****' + row.mobile.substr(7);\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.page = val;\n      this.getUsers();\n    },\n    getUsers: function getUsers() {\n      var _this = this;\n\n      var para = {\n        page: this.page,\n        name: this.filters.name\n      };\n      this.listLoading = true;\n      getUserListPage(para).then(function (res) {\n        _this.total = res.data.total;\n        _this.users = res.data.users;\n        _this.listLoading = false;\n      });\n    },\n    //显示新增界面\n    handleAdd: function handleAdd() {\n      this.addFormVisible = true;\n    },\n    //新增\n    addSubmit: function addSubmit() {\n      var _this2 = this;\n\n      this.$refs.addForm.validate(function (valid) {\n        if (valid) {\n          _this2.$confirm('确认提交吗？', '提示', {}).then(function () {\n            _this2.addLoading = true;\n            var para = Object.assign({}, _this2.addForm);\n            addUser(para).then(function (res) {\n              _this2.addLoading = false;\n\n              _this2.$message({\n                message: '提交成功',\n                type: 'success'\n              });\n\n              _this2.$refs['addForm'].resetFields();\n\n              _this2.addFormVisible = false;\n\n              _this2.getUsers();\n            });\n          });\n        }\n      });\n    },\n    //显示编辑界面\n    handleEdit: function handleEdit(index, row) {\n      this.editFormVisible = true;\n      this.editForm = Object.assign({}, row);\n    },\n    //编辑\n    editSubmit: function editSubmit() {\n      var _this3 = this;\n\n      this.$refs.editForm.validate(function (valid) {\n        if (valid) {\n          _this3.$confirm('确认提交吗？', '提示', {}).then(function () {\n            _this3.editLoading = true;\n            var para = Object.assign({}, _this3.editForm);\n            editUser(para).then(function (res) {\n              _this3.editLoading = false;\n\n              _this3.$message({\n                message: '提交成功',\n                type: 'success'\n              });\n\n              _this3.$refs['editForm'].resetFields();\n\n              _this3.editFormVisible = false;\n\n              _this3.getUsers();\n            });\n          });\n        }\n      });\n    },\n    //删除\n    handleDelete: function handleDelete(index, row) {\n      var _this4 = this;\n\n      this.$confirm('确认删除该记录吗?', '提示', {\n        type: 'warning'\n      }).then(function () {\n        _this4.listLoading = true;\n        var para = {\n          id: row.id\n        };\n        removeUser(para).then(function (res) {\n          _this4.listLoading = false;\n\n          _this4.$message({\n            message: '删除成功',\n            type: 'success'\n          });\n\n          _this4.getUsers();\n        });\n      }).catch(function () {});\n    },\n    selsChange: function selsChange(sels) {\n      this.sels = sels;\n    },\n    //批量删除\n    batchRemove: function batchRemove() {\n      var _this5 = this;\n\n      var ids = this.sels.map(function (item) {\n        return item.id;\n      }).toString();\n      this.$confirm('确认删除选中记录吗？', '提示', {\n        type: 'warning'\n      }).then(function () {\n        _this5.listLoading = true;\n        var para = {\n          ids: ids\n        };\n        batchRemoveUser(para).then(function (res) {\n          _this5.listLoading = false;\n\n          _this5.$message({\n            message: '删除成功',\n            type: 'success'\n          });\n\n          _this5.getUsers();\n        });\n      }).catch(function () {});\n    }\n  },\n  mounted: function mounted() {\n    this.getUsers();\n  }\n};",{"version":3,"sources":["UsersIndex.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<section>\n\t\t<!--工具条-->\n\t\t<el-col :span=\"24\" class=\"toolbar\" style=\"padding-bottom: 0px;\">\n\t\t\t<el-form :inline=\"true\" :model=\"filters\">\n\t\t\t\t<el-form-item>\n\t\t\t\t\t<el-input v-model=\"filters.name\" placeholder=\"姓名\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item>\n\t\t\t\t\t<el-button type=\"primary\" v-on:click=\"getUsers\">查询</el-button>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item>\n\t\t\t\t\t<el-button type=\"primary\" @click=\"handleAdd\">新增</el-button>\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t</el-col>\n\n\t  <el-table :data=\"users\" stripe style=\"width: 100%\" :default-sort = \"{prop: 'id', order: 'ascending'}\" v-loading=\"listLoading\" @selection-change=\"selsChange\">\n\t  \t<el-table-column type=\"selection\" width=\"55\"></el-table-column>\n\t    <el-table-column fixed prop=\"id\" label=\"序号\" sortable width=\"100\"></el-table-column>\n\t    <el-table-column prop=\"name\" label=\"姓名\" sortable width=\"180\"></el-table-column>\n\t    <el-table-column prop=\"mobile\" label=\"手机号\" :formatter=\"formatMobile\"></el-table-column>\n\t    <el-table-column prop=\"sex\" label=\"性别\" sortable :formatter=\"formatSex\"></el-table-column>\n\t    <el-table-column prop=\"birth\" label=\"出生日期\" sortable></el-table-column>\n\t    <el-table-column label=\"操作\">\n\t      <template slot-scope=\"scope\">\n\t        <el-button size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\n\t        <el-button size=\"mini\" type=\"danger\" @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\n\t      </template>\n\t    </el-table-column>\n\t  </el-table>\n\n\t  <!--工具条-->\n\t<el-col :span=\"24\" class=\"toolbar\">\n\t\t<el-button type=\"danger\" @click=\"batchRemove\" :disabled=\"this.sels.length===0\">批量删除</el-button>\n\t\t<el-pagination layout=\"prev, pager, next\" @current-change=\"handleCurrentChange\" :page-size=\"2\" :total=\"total\" style=\"float:right;\">\n\t\t</el-pagination>\n\t</el-col>\n\n\t  <!--编辑界面-->\n\t\t<el-dialog title=\"编辑\" :visible.sync=\"editFormVisible\" :close-on-click-modal=\"false\">\n\t\t\t<el-form :model=\"editForm\" label-width=\"80px\" :rules=\"editFormRules\" ref=\"editForm\">\n\t\t\t\t<el-form-item label=\"姓名\" prop=\"name\">\n\t\t\t\t\t<el-input v-model=\"editForm.name\" auto-complete=\"off\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"性别\">\n\t\t\t\t\t<el-radio-group v-model=\"editForm.sex\">\n\t\t\t\t\t\t<el-radio class=\"radio\" :label=\"1\">男</el-radio>\n\t\t\t\t\t\t<el-radio class=\"radio\" :label=\"2\">女</el-radio>\n\t\t\t\t\t</el-radio-group>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"序号\">\n\t\t\t\t\t<el-input-number v-model=\"editForm.id\" ></el-input-number>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"出生日期\">\n\t\t\t\t\t<el-date-picker type=\"date\" placeholder=\"选择日期\" v-model=\"editForm.birth\"></el-date-picker>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"手机号\">\n\t\t\t\t\t<el-input v-model=\"editForm.mobile\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\n\t\t\t\t<el-button @click=\"editFormVisible = false\">取消</el-button>\n\t\t\t\t<el-button type=\"primary\" @click=\"editSubmit\" :loading=\"editLoading\">提交</el-button>\n\t\t\t</div>\n\t\t</el-dialog>\n\n\n\t  <!--新增界面-->\n\t\t<el-dialog title=\"新增\" :visible.sync=\"addFormVisible\" :close-on-click-modal=\"false\">\n\t\t\t<el-form :model=\"addForm\" label-width=\"80px\" :rules=\"addFormRules\" ref=\"addForm\">\n\t\t\t\t<el-form-item label=\"姓名\" prop=\"name\">\n\t\t\t\t\t<el-input v-model=\"addForm.name\" auto-complete=\"off\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"性别\">\n\t\t\t\t\t<el-radio-group v-model=\"addForm.sex\">\n\t\t\t\t\t\t<el-radio class=\"radio\" :label=\"1\">男</el-radio>\n\t\t\t\t\t\t<el-radio class=\"radio\" :label=\"2\">女</el-radio>\n\t\t\t\t\t</el-radio-group>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"序号\">\n\t\t\t\t\t<el-input-number v-model=\"addForm.id\" ></el-input-number>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"出生日期\">\n\t\t\t\t\t<el-date-picker type=\"date\" placeholder=\"选择日期\" v-model=\"addForm.birth\"></el-date-picker>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"手机号\">\n\t\t\t\t\t<el-input v-model=\"addForm.mobile\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\n\t\t\t\t<el-button @click=\"addFormVisible = false\">取消</el-button>\n\t\t\t\t<el-button type=\"primary\" @click=\"addSubmit\" >提交</el-button>\n\t\t\t</div>\n\t\t</el-dialog>\n\t</section>\n</template>\n\n\n<script>\nimport { getUserListPage, removeUser, batchRemoveUser, editUser, addUser } from '@/api/user';\n\nexport default {\n    data() {\n      return {\n      \tfilters: {\n\t\t\tname: ''\n\t\t},\n        users:[],\n        page: 1,\n        total: 0,\n        listLoading: false,\n        sels: [],//列表选中列\n        //新增界面数据\n        addFormVisible: false,//新增界面是否显示\n        addFormRules: {\n\t\t\tname: [\n\t\t\t\t{ required: true, message: '请输入姓名', trigger: 'blur' }\n\t\t\t]\n\t\t},\n\t\taddForm: {\n\t\t\tname: '',\n\t\t\tsex: -1,\n\t\t\tid: 0,\n\t\t\tbirth: '',\n\t\t\tmobile: ''\n\t\t},\n\t\teditFormVisible: false,//编辑界面是否显示\n\t\teditLoading: false,\n\t\teditFormRules: {\n\t\t\tname: [\n\t\t\t\t{ required: true, message: '请输入姓名', trigger: 'blur' }\n\t\t\t]\n\t\t},\n\t\t//编辑界面数据\n\t\teditForm: {\n\t\t\tname: '',\n\t\t\tsex: -1,\n\t\t\tid: 0,\n\t\t\tbirth: '',\n\t\t\tmobile: ''\n\t\t},\n\t}\n    },\n    methods: {\n\t\tformatSex: function (row, column) {\n\t\t\treturn row.sex == 1 ? '男' : row.sex == 2 ? '女' : '未知';\n\t\t},\n\t\t//手机号隐藏\n\t\tformatMobile: function(row, column){\n\t\t\treturn row.mobile.substr(0,3)+ '****'+ row.mobile.substr(7);\n\t\t},\n\t\thandleCurrentChange(val) {\n\t\t\tthis.page = val;\n\t\t\tthis.getUsers();\n\t\t},\n\t\tgetUsers(){\n\t\t\tlet para ={\n\t\t\t\tpage:this.page,\n\t\t\t\tname:this.filters.name\n\t\t\t};\n\t\t\tthis.listLoading = true;\n\t\t\tgetUserListPage(para).then((res)=>{\n\t\t\t\tthis.total = res.data.total;\n\t\t\t\tthis.users = res.data.users;\n\t\t\t\tthis.listLoading = false;\n\t\t\t});\n\t\t},\n\t\t//显示新增界面\n\t\thandleAdd: function () {\n\t\t\tthis.addFormVisible = true;\n\t\t},\n\t\t//新增\n\t\taddSubmit: function () {\n\t\t\tthis.$refs.addForm.validate((valid) => {\n\t\t\t\tif (valid) {\n\t\t\t\t\tthis.$confirm('确认提交吗？', '提示', {}).then(() => {\n\t\t\t\t\t\tthis.addLoading = true;\n\t\t\t\t\t\tlet para = Object.assign({}, this.addForm);\n\t\t\t\t\t\taddUser(para).then((res) => {\n\t\t\t\t\t\t\tthis.addLoading = false;\n\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\t\tmessage: '提交成功',\n\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.$refs['addForm'].resetFields();\n\t\t\t\t\t\t\tthis.addFormVisible = false;\n\t\t\t\t\t\t\tthis.getUsers();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//显示编辑界面\n\t\thandleEdit: function (index, row) {\n\t\t\tthis.editFormVisible = true;\n\t\t\tthis.editForm = Object.assign({}, row);\n\t\t},\n\t\t//编辑\n\t\teditSubmit: function () {\n\t\t\tthis.$refs.editForm.validate((valid) => {\n\t\t\t\tif (valid) {\n\t\t\t\t\tthis.$confirm('确认提交吗？', '提示', {}).then(() => {\n\t\t\t\t\t\tthis.editLoading = true;\n\t\t\t\t\t\tlet para = Object.assign({}, this.editForm);\n\t\t\t\t\t\teditUser(para).then((res) => {\n\t\t\t\t\t\t\tthis.editLoading = false;\n\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\t\tmessage: '提交成功',\n\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.$refs['editForm'].resetFields();\n\t\t\t\t\t\t\tthis.editFormVisible = false;\n\t\t\t\t\t\t\tthis.getUsers();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//删除\n\t\thandleDelete: function (index, row) {\n\t\t\tthis.$confirm('确认删除该记录吗?', '提示', {\n\t\t\t\ttype: 'warning'\n\t\t\t}).then(() => {\n\t\t\t\tthis.listLoading = true;\t\n\t\t\t\tlet para = { id: row.id };\n\t\t\t\tremoveUser(para).then((res) => {\n\t\t\t\t\tthis.listLoading = false;\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\tmessage: '删除成功',\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t\tthis.getUsers();\n\t\t\t\t});\n\t\t\t}).catch(() => {\n\n\t\t\t});\n\t\t},\n\t\tselsChange: function (sels) {\n\t\t\tthis.sels = sels;\n\t\t},\n\t\t//批量删除\n\t\tbatchRemove: function () {\n\t\t\tvar ids = this.sels.map(item => item.id).toString();\n\t\t\tthis.$confirm('确认删除选中记录吗？', '提示', {\n\t\t\t\ttype: 'warning'\n\t\t\t}).then(() => {\n\t\t\t\tthis.listLoading = true;\n\t\t\t\tlet para = { ids: ids };\n\t\t\t\tbatchRemoveUser(para).then((res) => {\n\t\t\t\t\tthis.listLoading = false;\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\tmessage: '删除成功',\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t\tthis.getUsers();\n\t\t\t\t});\n\t\t\t}).catch(() => {\n\n\t\t\t});\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.getUsers();\n\t}\n  }\n</script>\n\n<style scoped lang=\"scss\">\n  \n\n</style>"],"sourceRoot":"src/components/users"}]}
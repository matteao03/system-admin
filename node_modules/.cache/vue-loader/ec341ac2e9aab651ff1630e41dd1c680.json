{"remainingRequest":"/Users/tangjun/www/system-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tangjun/www/system-admin/src/components/users/UsersIndex.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tangjun/www/system-admin/src/components/users/UsersIndex.vue","mtime":1545220118000},{"path":"/Users/tangjun/www/system-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tangjun/www/system-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/tangjun/www/system-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tangjun/www/system-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { getUserListPage, removeUser, batchRemoveUser, editUser, addUser } from '@/api/user';\n\nexport default {\n    data() {\n      return {\n      \tfilters: {\n\t\t\tname: ''\n\t\t},\n        users:[],\n        page: 1,\n        total: 0,\n        listLoading: false,\n        sels: [],//列表选中列\n        //新增界面数据\n        addFormVisible: false,//新增界面是否显示\n        addFormRules: {\n\t\t\tname: [\n\t\t\t\t{ required: true, message: '请输入姓名', trigger: 'blur' }\n\t\t\t]\n\t\t},\n\t\taddForm: {\n\t\t\tname: '',\n\t\t\tsex: -1,\n\t\t\tid: 0,\n\t\t\tbirth: '',\n\t\t\tmobile: ''\n\t\t},\n\t\teditFormVisible: false,//编辑界面是否显示\n\t\teditLoading: false,\n\t\teditFormRules: {\n\t\t\tname: [\n\t\t\t\t{ required: true, message: '请输入姓名', trigger: 'blur' }\n\t\t\t]\n\t\t},\n\t\t//编辑界面数据\n\t\teditForm: {\n\t\t\tname: '',\n\t\t\tsex: -1,\n\t\t\tid: 0,\n\t\t\tbirth: '',\n\t\t\tmobile: ''\n\t\t},\n\t}\n    },\n    methods: {\n\t\tformatSex: function (row, column) {\n\t\t\treturn row.sex == 1 ? '男' : row.sex == 2 ? '女' : '未知';\n\t\t},\n\t\t//手机号隐藏\n\t\tformatMobile: function(row, column){\n\t\t\treturn row.mobile.substr(0,3)+ '****'+ row.mobile.substr(7);\n\t\t},\n\t\thandleCurrentChange(val) {\n\t\t\tthis.page = val;\n\t\t\tthis.getUsers();\n\t\t},\n\t\tgetUsers(){\n\t\t\tlet para ={\n\t\t\t\tpage:this.page,\n\t\t\t\tname:this.filters.name\n\t\t\t};\n\t\t\tthis.listLoading = true;\n\t\t\tgetUserListPage(para).then((res)=>{\n\t\t\t\tthis.total = res.data.total;\n\t\t\t\tthis.users = res.data.users;\n\t\t\t\tthis.listLoading = false;\n\t\t\t});\n\t\t},\n\t\t//显示新增界面\n\t\thandleAdd: function () {\n\t\t\tthis.addFormVisible = true;\n\t\t},\n\t\t//新增\n\t\taddSubmit: function () {\n\t\t\tthis.$refs.addForm.validate((valid) => {\n\t\t\t\tif (valid) {\n\t\t\t\t\tthis.$confirm('确认提交吗？', '提示', {}).then(() => {\n\t\t\t\t\t\tthis.addLoading = true;\n\t\t\t\t\t\tlet para = Object.assign({}, this.addForm);\n\t\t\t\t\t\taddUser(para).then((res) => {\n\t\t\t\t\t\t\tthis.addLoading = false;\n\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\t\tmessage: '提交成功',\n\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.$refs['addForm'].resetFields();\n\t\t\t\t\t\t\tthis.addFormVisible = false;\n\t\t\t\t\t\t\tthis.getUsers();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//显示编辑界面\n\t\thandleEdit: function (index, row) {\n\t\t\tthis.editFormVisible = true;\n\t\t\tthis.editForm = Object.assign({}, row);\n\t\t},\n\t\t//编辑\n\t\teditSubmit: function () {\n\t\t\tthis.$refs.editForm.validate((valid) => {\n\t\t\t\tif (valid) {\n\t\t\t\t\tthis.$confirm('确认提交吗？', '提示', {}).then(() => {\n\t\t\t\t\t\tthis.editLoading = true;\n\t\t\t\t\t\tlet para = Object.assign({}, this.editForm);\n\t\t\t\t\t\teditUser(para).then((res) => {\n\t\t\t\t\t\t\tthis.editLoading = false;\n\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\t\tmessage: '提交成功',\n\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.$refs['editForm'].resetFields();\n\t\t\t\t\t\t\tthis.editFormVisible = false;\n\t\t\t\t\t\t\tthis.getUsers();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//删除\n\t\thandleDelete: function (index, row) {\n\t\t\tthis.$confirm('确认删除该记录吗?', '提示', {\n\t\t\t\ttype: 'warning'\n\t\t\t}).then(() => {\n\t\t\t\tthis.listLoading = true;\t\n\t\t\t\tlet para = { id: row.id };\n\t\t\t\tremoveUser(para).then((res) => {\n\t\t\t\t\tthis.listLoading = false;\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\tmessage: '删除成功',\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t\tthis.getUsers();\n\t\t\t\t});\n\t\t\t}).catch(() => {\n\n\t\t\t});\n\t\t},\n\t\tselsChange: function (sels) {\n\t\t\tthis.sels = sels;\n\t\t},\n\t\t//批量删除\n\t\tbatchRemove: function () {\n\t\t\tvar ids = this.sels.map(item => item.id).toString();\n\t\t\tthis.$confirm('确认删除选中记录吗？', '提示', {\n\t\t\t\ttype: 'warning'\n\t\t\t}).then(() => {\n\t\t\t\tthis.listLoading = true;\n\t\t\t\tlet para = { ids: ids };\n\t\t\t\tbatchRemoveUser(para).then((res) => {\n\t\t\t\t\tthis.listLoading = false;\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\tmessage: '删除成功',\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t\tthis.getUsers();\n\t\t\t\t});\n\t\t\t}).catch(() => {\n\n\t\t\t});\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.getUsers();\n\t}\n  }\n",{"version":3,"sources":["UsersIndex.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UsersIndex.vue","sourceRoot":"src/components/users","sourcesContent":["<template>\n\t<section>\n\t\t<!--工具条-->\n\t\t<el-col :span=\"24\" class=\"toolbar\" style=\"padding-bottom: 0px;\">\n\t\t\t<el-form :inline=\"true\" :model=\"filters\">\n\t\t\t\t<el-form-item>\n\t\t\t\t\t<el-input v-model=\"filters.name\" placeholder=\"姓名\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item>\n\t\t\t\t\t<el-button type=\"primary\" v-on:click=\"getUsers\">查询</el-button>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item>\n\t\t\t\t\t<el-button type=\"primary\" @click=\"handleAdd\">新增</el-button>\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t</el-col>\n\n\t  <el-table :data=\"users\" stripe style=\"width: 100%\" :default-sort = \"{prop: 'id', order: 'ascending'}\" v-loading=\"listLoading\" @selection-change=\"selsChange\">\n\t  \t<el-table-column type=\"selection\" width=\"55\"></el-table-column>\n\t    <el-table-column fixed prop=\"id\" label=\"序号\" sortable width=\"100\"></el-table-column>\n\t    <el-table-column prop=\"name\" label=\"姓名\" sortable width=\"180\"></el-table-column>\n\t    <el-table-column prop=\"mobile\" label=\"手机号\" :formatter=\"formatMobile\"></el-table-column>\n\t    <el-table-column prop=\"sex\" label=\"性别\" sortable :formatter=\"formatSex\"></el-table-column>\n\t    <el-table-column prop=\"birth\" label=\"出生日期\" sortable></el-table-column>\n\t    <el-table-column label=\"操作\">\n\t      <template slot-scope=\"scope\">\n\t        <el-button size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\n\t        <el-button size=\"mini\" type=\"danger\" @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\n\t      </template>\n\t    </el-table-column>\n\t  </el-table>\n\n\t  <!--工具条-->\n\t<el-col :span=\"24\" class=\"toolbar\">\n\t\t<el-button type=\"danger\" @click=\"batchRemove\" :disabled=\"this.sels.length===0\">批量删除</el-button>\n\t\t<el-pagination layout=\"prev, pager, next\" @current-change=\"handleCurrentChange\" :page-size=\"2\" :total=\"total\" style=\"float:right;\">\n\t\t</el-pagination>\n\t</el-col>\n\n\t  <!--编辑界面-->\n\t\t<el-dialog title=\"编辑\" :visible.sync=\"editFormVisible\" :close-on-click-modal=\"false\">\n\t\t\t<el-form :model=\"editForm\" label-width=\"80px\" :rules=\"editFormRules\" ref=\"editForm\">\n\t\t\t\t<el-form-item label=\"姓名\" prop=\"name\">\n\t\t\t\t\t<el-input v-model=\"editForm.name\" auto-complete=\"off\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"性别\">\n\t\t\t\t\t<el-radio-group v-model=\"editForm.sex\">\n\t\t\t\t\t\t<el-radio class=\"radio\" :label=\"1\">男</el-radio>\n\t\t\t\t\t\t<el-radio class=\"radio\" :label=\"2\">女</el-radio>\n\t\t\t\t\t</el-radio-group>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"序号\">\n\t\t\t\t\t<el-input-number v-model=\"editForm.id\" ></el-input-number>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"出生日期\">\n\t\t\t\t\t<el-date-picker type=\"date\" placeholder=\"选择日期\" v-model=\"editForm.birth\"></el-date-picker>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"手机号\">\n\t\t\t\t\t<el-input v-model=\"editForm.mobile\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\n\t\t\t\t<el-button @click=\"editFormVisible = false\">取消</el-button>\n\t\t\t\t<el-button type=\"primary\" @click=\"editSubmit\" :loading=\"editLoading\">提交</el-button>\n\t\t\t</div>\n\t\t</el-dialog>\n\n\n\t  <!--新增界面-->\n\t\t<el-dialog title=\"新增\" :visible.sync=\"addFormVisible\" :close-on-click-modal=\"false\">\n\t\t\t<el-form :model=\"addForm\" label-width=\"80px\" :rules=\"addFormRules\" ref=\"addForm\">\n\t\t\t\t<el-form-item label=\"姓名\" prop=\"name\">\n\t\t\t\t\t<el-input v-model=\"addForm.name\" auto-complete=\"off\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"性别\">\n\t\t\t\t\t<el-radio-group v-model=\"addForm.sex\">\n\t\t\t\t\t\t<el-radio class=\"radio\" :label=\"1\">男</el-radio>\n\t\t\t\t\t\t<el-radio class=\"radio\" :label=\"2\">女</el-radio>\n\t\t\t\t\t</el-radio-group>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"序号\">\n\t\t\t\t\t<el-input-number v-model=\"addForm.id\" ></el-input-number>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"出生日期\">\n\t\t\t\t\t<el-date-picker type=\"date\" placeholder=\"选择日期\" v-model=\"addForm.birth\"></el-date-picker>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"手机号\">\n\t\t\t\t\t<el-input v-model=\"addForm.mobile\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\n\t\t\t\t<el-button @click=\"addFormVisible = false\">取消</el-button>\n\t\t\t\t<el-button type=\"primary\" @click=\"addSubmit\" >提交</el-button>\n\t\t\t</div>\n\t\t</el-dialog>\n\t</section>\n</template>\n\n\n<script>\nimport { getUserListPage, removeUser, batchRemoveUser, editUser, addUser } from '@/api/user';\n\nexport default {\n    data() {\n      return {\n      \tfilters: {\n\t\t\tname: ''\n\t\t},\n        users:[],\n        page: 1,\n        total: 0,\n        listLoading: false,\n        sels: [],//列表选中列\n        //新增界面数据\n        addFormVisible: false,//新增界面是否显示\n        addFormRules: {\n\t\t\tname: [\n\t\t\t\t{ required: true, message: '请输入姓名', trigger: 'blur' }\n\t\t\t]\n\t\t},\n\t\taddForm: {\n\t\t\tname: '',\n\t\t\tsex: -1,\n\t\t\tid: 0,\n\t\t\tbirth: '',\n\t\t\tmobile: ''\n\t\t},\n\t\teditFormVisible: false,//编辑界面是否显示\n\t\teditLoading: false,\n\t\teditFormRules: {\n\t\t\tname: [\n\t\t\t\t{ required: true, message: '请输入姓名', trigger: 'blur' }\n\t\t\t]\n\t\t},\n\t\t//编辑界面数据\n\t\teditForm: {\n\t\t\tname: '',\n\t\t\tsex: -1,\n\t\t\tid: 0,\n\t\t\tbirth: '',\n\t\t\tmobile: ''\n\t\t},\n\t}\n    },\n    methods: {\n\t\tformatSex: function (row, column) {\n\t\t\treturn row.sex == 1 ? '男' : row.sex == 2 ? '女' : '未知';\n\t\t},\n\t\t//手机号隐藏\n\t\tformatMobile: function(row, column){\n\t\t\treturn row.mobile.substr(0,3)+ '****'+ row.mobile.substr(7);\n\t\t},\n\t\thandleCurrentChange(val) {\n\t\t\tthis.page = val;\n\t\t\tthis.getUsers();\n\t\t},\n\t\tgetUsers(){\n\t\t\tlet para ={\n\t\t\t\tpage:this.page,\n\t\t\t\tname:this.filters.name\n\t\t\t};\n\t\t\tthis.listLoading = true;\n\t\t\tgetUserListPage(para).then((res)=>{\n\t\t\t\tthis.total = res.data.total;\n\t\t\t\tthis.users = res.data.users;\n\t\t\t\tthis.listLoading = false;\n\t\t\t});\n\t\t},\n\t\t//显示新增界面\n\t\thandleAdd: function () {\n\t\t\tthis.addFormVisible = true;\n\t\t},\n\t\t//新增\n\t\taddSubmit: function () {\n\t\t\tthis.$refs.addForm.validate((valid) => {\n\t\t\t\tif (valid) {\n\t\t\t\t\tthis.$confirm('确认提交吗？', '提示', {}).then(() => {\n\t\t\t\t\t\tthis.addLoading = true;\n\t\t\t\t\t\tlet para = Object.assign({}, this.addForm);\n\t\t\t\t\t\taddUser(para).then((res) => {\n\t\t\t\t\t\t\tthis.addLoading = false;\n\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\t\tmessage: '提交成功',\n\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.$refs['addForm'].resetFields();\n\t\t\t\t\t\t\tthis.addFormVisible = false;\n\t\t\t\t\t\t\tthis.getUsers();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//显示编辑界面\n\t\thandleEdit: function (index, row) {\n\t\t\tthis.editFormVisible = true;\n\t\t\tthis.editForm = Object.assign({}, row);\n\t\t},\n\t\t//编辑\n\t\teditSubmit: function () {\n\t\t\tthis.$refs.editForm.validate((valid) => {\n\t\t\t\tif (valid) {\n\t\t\t\t\tthis.$confirm('确认提交吗？', '提示', {}).then(() => {\n\t\t\t\t\t\tthis.editLoading = true;\n\t\t\t\t\t\tlet para = Object.assign({}, this.editForm);\n\t\t\t\t\t\teditUser(para).then((res) => {\n\t\t\t\t\t\t\tthis.editLoading = false;\n\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\t\tmessage: '提交成功',\n\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.$refs['editForm'].resetFields();\n\t\t\t\t\t\t\tthis.editFormVisible = false;\n\t\t\t\t\t\t\tthis.getUsers();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//删除\n\t\thandleDelete: function (index, row) {\n\t\t\tthis.$confirm('确认删除该记录吗?', '提示', {\n\t\t\t\ttype: 'warning'\n\t\t\t}).then(() => {\n\t\t\t\tthis.listLoading = true;\t\n\t\t\t\tlet para = { id: row.id };\n\t\t\t\tremoveUser(para).then((res) => {\n\t\t\t\t\tthis.listLoading = false;\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\tmessage: '删除成功',\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t\tthis.getUsers();\n\t\t\t\t});\n\t\t\t}).catch(() => {\n\n\t\t\t});\n\t\t},\n\t\tselsChange: function (sels) {\n\t\t\tthis.sels = sels;\n\t\t},\n\t\t//批量删除\n\t\tbatchRemove: function () {\n\t\t\tvar ids = this.sels.map(item => item.id).toString();\n\t\t\tthis.$confirm('确认删除选中记录吗？', '提示', {\n\t\t\t\ttype: 'warning'\n\t\t\t}).then(() => {\n\t\t\t\tthis.listLoading = true;\n\t\t\t\tlet para = { ids: ids };\n\t\t\t\tbatchRemoveUser(para).then((res) => {\n\t\t\t\t\tthis.listLoading = false;\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\tmessage: '删除成功',\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t\tthis.getUsers();\n\t\t\t\t});\n\t\t\t}).catch(() => {\n\n\t\t\t});\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.getUsers();\n\t}\n  }\n</script>\n\n<style scoped lang=\"scss\">\n  \n\n</style>"]}]}